---
import 'hotkeypad/reset.css'
import 'hotkeypad/index.css'
import { type SocialIcon } from "@/types"
import { basics } from "@cv"

const { profiles } = basics

const SOCIAL_ICONS: SocialIcon = {
  GitHub: `<svg
  width="16"
  height="16"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
  style="margin-right: 8px"
  ><path
    fill="currentColor"
    d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"
  ></path></svg
>`,
  LinkedIn: `<svg
  height="16"
  width="16"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
  style="margin-right: 8px"
  ><title>LinkedIn</title><path
    fill="currentColor"
    d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"
  ></path></svg
>`,
  X: `<svg
  width="16"
  height="16"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
  style="margin-right: 8px"
  ><title>X</title><path
    fill="currentColor"
    d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"
  ></path></svg
>
`,
  DaylyDev: `<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
  width="18"
  height="18" viewBox="0 0 300 168" enable-background="new 0 0 300 168" xml:space="preserve">
<path fill="currentColor" opacity="1.000000" stroke="none" 
	d="
M91.000000,169.000000 
	C86.975456,169.000000 82.950912,169.000000 78.269150,168.722198 
	C75.259735,166.647827 72.673111,165.087082 70.591667,163.018127 
	C50.341869,142.889740 30.143412,122.709305 10.020930,102.453682 
	C6.785121,99.196449 3.995749,95.495712 1.000001,92.000000 
	C1.000000,87.643097 1.000000,83.286201 1.277808,78.270615 
	C3.352178,75.259727 4.912908,72.673096 6.981868,70.591660 
	C27.110243,50.341854 47.290703,30.143415 67.546326,10.020933 
	C70.803551,6.785121 74.504288,3.995747 78.000000,1.000000 
	C82.356903,1.000000 86.713799,1.000000 91.725586,1.278041 
	C94.509216,3.128173 96.869026,4.466912 98.729874,6.309546 
	C112.688072,20.131176 126.509003,34.091480 140.474319,47.905849 
	C142.980621,50.385059 143.452759,52.235752 140.683624,54.895565 
	C133.961639,61.352173 127.397537,67.977257 120.897705,74.658859 
	C118.580048,77.041328 116.714996,77.463165 114.284760,74.827560 
	C108.545349,68.603119 102.595261,62.573013 96.851387,56.352570 
	C93.159920,52.354805 89.683334,48.158607 86.901718,44.960983 
	C72.406837,59.448334 59.178143,72.670158 45.442455,86.398705 
	C54.233437,95.044258 63.468803,104.392769 73.033104,113.391693 
	C76.477318,116.632309 77.312920,119.312019 74.853134,123.615723 
	C71.488770,129.502121 68.857422,135.807465 65.743256,142.040695 
	C65.521233,142.423813 65.467819,142.699493 65.414398,142.975159 
	C65.809464,142.897049 66.204536,142.818939 66.856064,142.522125 
	C111.238831,98.205162 155.349457,54.091167 199.523621,10.040898 
	C202.781387,6.792249 206.497162,4.002885 210.000000,1.000002 
	C214.356903,1.000000 218.713806,1.000000 223.729401,1.277806 
	C229.610519,6.337008 234.832947,11.118402 239.852112,16.171867 
	C238.012268,18.228039 236.037277,19.811954 234.831284,21.850758 
	C233.543640,24.027636 232.982056,26.634007 231.929901,29.339249 
	C206.778366,54.974762 181.850357,80.373375 156.800583,105.651299 
	C145.023926,117.535187 133.118927,129.296768 121.075142,140.909515 
	C111.201378,150.429916 101.036072,159.647949 91.000000,169.000000 
z"/>
<path fill="currentColor" opacity="1.000000" stroke="none" 
	d="
M211.463181,169.000000 
	C195.745605,162.318466 196.231567,145.203018 206.278458,135.903854 
	C222.271851,121.100723 237.278442,105.231056 252.691544,89.801643 
	C257.476196,85.011925 257.469513,84.986465 252.547974,80.053238 
	C244.434982,71.920952 236.379288,63.729401 228.148376,55.718033 
	C225.343613,52.988098 224.821838,50.615250 226.712173,46.962910 
	C230.435471,39.769135 233.570953,32.271126 237.214111,24.355955 
	C238.635132,22.162952 239.791611,20.512951 241.306030,18.931648 
	C243.663223,20.388027 245.918777,21.516993 247.621597,23.203899 
	C262.582275,38.024746 277.486847,52.903065 292.301636,67.869675 
	C295.424866,71.024940 298.111969,74.611931 301.000000,78.000000 
	C301.000000,82.356903 301.000000,86.713799 300.753387,91.763321 
	C298.552216,94.922699 296.814362,97.604897 294.609314,99.822563 
	C274.522308,120.024658 254.386093,140.178207 234.175903,160.257034 
	C231.011719,163.400635 227.403107,166.096893 224.000000,169.000000 
	C219.975449,169.000000 215.950912,169.000000 211.463181,169.000000 
z"/>
<path fill="currentColor" opacity="1.000000" stroke="none" 
	d="
M239.852112,16.171871 
	C240.352997,16.672022 240.650620,17.444242 240.948181,18.539707 
	C239.791611,20.512951 238.635132,22.162952 237.256165,23.985645 
	C235.576080,25.678728 234.118439,27.199116 232.382172,28.886196 
	C232.982056,26.634007 233.543640,24.027636 234.831284,21.850758 
	C236.037277,19.811954 238.012268,18.228039 239.852112,16.171871 
z"/>
</svg>
`
}

const profilesInfo = profiles.map(({ network, url }) => {
  const icon = SOCIAL_ICONS[network]
  const firstLetter = network[0].toUpperCase()

  return {
    id: network,
    section: "Social",
    title: `Visitar ${network}`,
    url,
    icon,
    hotkey: `ctrl+${firstLetter}`
  }
})
---

<footer id="normal-footer" class="no-print">
  Pulsa <kbd>Cmd</kbd> + <kbd>K</kbd> para abrir la paleta de comandos.
</footer>

<div id="footer-button" class="no-print">
  <svg
    xmlns="http://www.w3.org/2000/svg"
    class="icon icon-tabler icon-tabler-command"
    width="32"
    height="32"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="#777"
    fill="none"
    stroke-linecap="round"
    stroke-linejoin="round"
  >
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <path
      d="M7 9a2 2 0 1 1 2 -2v10a2 2 0 1 1 -2 -2h10a2 2 0 1 1 -2 2v-10a2 2 0 1 1 2 2h-10"
    ></path>
  </svg>
</div>

<div
  id="hotkeypad"
  data-placeholder="Buscar comando"
  data-info={JSON.stringify(profilesInfo)}
>
</div>

<script>
  interface Info {
    id: string
    section: string
    title: string
    url: string
    icon: string
    hotkey: string
    handler?: () => void
  }

  import HotKeyPad from "hotkeypad"

  const hotkeypad = new HotKeyPad()
  const info = hotkeypad.instance.getAttribute("data-info") ?? "[]"
  const parsedInfo = JSON.parse(info) as Info[]

  const data = parsedInfo.map(
    ({ url, hotkey, icon, id, section, title }) => {
      return {
        id,
        title,
        icon,
        hotkey,
        section,
        handler: () => {
          window.open(url, "_blank")
        }
      }
    }
  )
  hotkeypad.setCommands([
    {
      id: "print",
      title: "Imprimir",
      icon: `<svg style="margin-right: 8px" width="16" height="16" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z" />
</svg>`,
      hotkey: "ctrl+P",
      section: "Acciones",
      handler: () => {
        window.print()
      }
    },
    ...data
  ])

  const footerButton = document.getElementById("footer-button")
  footerButton?.addEventListener("click", () => {
    var event = new KeyboardEvent("keydown", {
      key: "K",
      code: "KeyK",
      keyCode: 75,
      which: 75,
      ctrlKey: true,
      altKey: false,
      shiftKey: false,
      metaKey: false
    })

    document.dispatchEvent(event)
  })
</script>

<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @media (min-width: 601px) {
    #normal-footer {
      display: block;
    }

    #footer-button {
      display: none;
    }
  }

  @media (max-width: 600px) {
    #normal-footer {
      display: none;
    }

    #footer-button {
      background: #fff;
      position: fixed;
      border: 1px solid #eee;
      right: 10px;
      bottom: 10px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
  }

  footer {
    background: #fdfdfd;
    border-top: 1px solid #eee;
    position: fixed;
    bottom: 0px;
    width: 100%;
    padding-block: 8px;
    text-align: center;
    font-size: 0.85rem;

    view-timeline-name: --revealing;
    view-timeline-axis: block;

    animation: linear 0.3s fadeIn;
    animation-timeline: --revealing;
    animation-range: entry 100% cover 10%;
  }

  kbd {
    background: #eee;
    border-radius: 4px;
    padding: 2px 4px;
    font-size: 12px;
  }
</style>
